(function(t){function n(n){for(var o,c,a=n[0],s=n[1],u=n[2],l=0,p=[];l<a.length;l++)c=a[l],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);d&&d(n);while(p.length)p.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],o=!0,a=1;a<e.length;a++){var s=e[a];0!==r[s]&&(o=!1)}o&&(i.splice(n--,1),t=c(c.s=e[0]))}return t}var o={},r={app:0},i=[];function c(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=o,c.d=function(t,n,e){c.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,n){if(1&n&&(t=c(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)c.d(e,o,function(n){return t[n]}.bind(null,o));return e},c.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(n,"a",n),n},c.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=n,a=a.slice();for(var u=0;u<a.length;u++)n(a[u]);var d=s;i.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"329b":function(t,n,e){"use strict";e("5070")},5070:function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("7a23"),r={class:"wrapper"};function i(t,n,e,i,c,a){var s=Object(o["g"])("Start"),u=Object(o["g"])("Recording"),d=Object(o["g"])("Stopped"),l=Object(o["g"])("Uploading"),p=Object(o["g"])("Finish");return Object(o["f"])(),Object(o["c"])("div",r,["start"==c.state?(Object(o["f"])(),Object(o["c"])(s,{key:0,onStartRecord:a.startRecording},null,8,["onStartRecord"])):"recording"==c.state?(Object(o["f"])(),Object(o["c"])(u,{key:1,onStop:a.pauseRecording,onCancel:t.cancelRecording,onFinish:a.finishRecording,seconds:a.formatTime(c.seconds)},null,8,["onStop","onCancel","onFinish","seconds"])):"stopped"==c.state?(Object(o["f"])(),Object(o["c"])(d,{key:2,onCancel:n[1]||(n[1]=function(t){return c.state="start"}),onFinish:a.finishRecording,onContinue:a.startRecording,seconds:a.formatTime(c.seconds)},null,8,["onFinish","onContinue","seconds"])):"uploading"==c.state?(Object(o["f"])(),Object(o["c"])(l,{key:3})):"finish"==c.state?(Object(o["f"])(),Object(o["c"])(p,{key:4,audioDownloadUrl:c.audioDownloadLink,audioListeningUrl:c.audioListeningLink},null,8,["audioDownloadUrl","audioListeningUrl"])):Object(o["d"])("",!0)])}e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d");var c={class:"start"},a={class:"start__info"};function s(t,n){return Object(o["f"])(),Object(o["c"])("div",c,[Object(o["e"])("div",a,[Object(o["e"])("button",{onClick:n[1]||(n[1]=function(n){return t.$emit("startRecord")})},"start recording")])])}const u={};u.render=s;var d=u,l={class:"recording"},p={class:"recording-info"},f={class:"recording__buttoms"};function b(t,n,e,r,i,c){return Object(o["f"])(),Object(o["c"])("div",l,[Object(o["e"])("div",p," recording... "+Object(o["h"])(e.seconds),1),Object(o["e"])("div",f,[Object(o["e"])("button",{class:"stop-btn",onClick:n[1]||(n[1]=function(n){return t.$emit("stop")})},"Stop"),Object(o["e"])("button",{class:"done-btn",onClick:n[2]||(n[2]=function(n){return t.$emit("finish")})},"Done"),Object(o["e"])("button",{class:"cancel-btn",onClick:n[3]||(n[3]=function(n){return t.$emit("cancel")})},"Cancel")])])}var O={props:{seconds:String}};O.render=b;var j=O,g={class:"stopped"},v={class:"stopped__info"},h={class:"stopped__buttons"};function y(t,n,e,r,i,c){return Object(o["f"])(),Object(o["c"])("div",g,[Object(o["e"])("div",v," Stopped... "+Object(o["h"])(e.seconds),1),Object(o["e"])("div",h,[Object(o["e"])("button",{onClick:n[1]||(n[1]=function(n){return t.$emit("continue")})},"Continue"),Object(o["e"])("button",{onClick:n[2]||(n[2]=function(n){return t.$emit("finish")})},"Done"),Object(o["e"])("button",{onClick:n[3]||(n[3]=function(n){return t.$emit("cancel")})},"Cancel")])])}var m={props:{seconds:String}};m.render=y;var k=m,S={class:"uploading"};function w(t,n){return Object(o["f"])(),Object(o["c"])("div",S," uploading ")}const C={};C.render=w;var L=C,R={class:"dowload"};function U(t,n,e,r,i,c){var a=Object(o["g"])("AudioPlayer");return Object(o["f"])(),Object(o["c"])(o["a"],null,[Object(o["e"])(a,{audioLink:e.audioListeningUrl},null,8,["audioLink"]),Object(o["e"])("div",R,[Object(o["e"])("a",{href:e.audioDownloadUrl},"download",8,["href"])])],64)}var _={class:"audio"},D=Object(o["e"])("div",{class:"porgress-bar"},null,-1),x={class:"controls"};function M(t,n,e,r,i,c){return Object(o["f"])(),Object(o["c"])("div",_,[Object(o["e"])("audio",{src:e.audioLink},null,8,["src"]),D,Object(o["e"])("div",x,[Object(o["e"])("button",{onClick:n[1]||(n[1]=function(){return c.play&&c.play.apply(c,arguments)})},"play"),Object(o["e"])("button",{onClick:n[2]||(n[2]=function(){return c.stop&&c.stop.apply(c,arguments)})},"stop"),Object(o["e"])("button",{onClick:n[3]||(n[3]=function(t){return c.setSpeed(.25)})},"0.25x"),Object(o["e"])("button",{onClick:n[4]||(n[4]=function(t){return c.setSpeed(1)})},"1x"),Object(o["e"])("button",{onClick:n[5]||(n[5]=function(t){return c.setSpeed(1.5)})},"1.5x"),Object(o["e"])("button",{onClick:n[6]||(n[6]=function(t){return c.setSpeed(2)})},"2x")])])}var P={props:{audioLink:String},computed:{audio:function(){var t=document.querySelector("audio");return t.loop=!0,t.addEventListener("ended",(function(){console.log("ended")})),t}},methods:{play:function(){this.audio.play()},stop:function(){this.audio.pause()},setSpeed:function(t){this.audio.pause(),this.audio.playbackRate=t,this.audio.play()}}};P.render=M;var T=P,F={components:{AudioPlayer:T},props:{audioDownloadUrl:String,audioListeningUrl:String}};F.render=U;var $=F,A=e("1157"),E=e.n(A),I=[],J=null,q=(navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){J=new MediaRecorder(t),J.ondataavailable=function(t){return I.push(t.data)}})),null),B={start:"start",recording:"recording",stoppped:"stopped",uploading:"uploading",finish:"finish"},H={components:{Start:d,Recording:j,Stopped:k,Uploading:L,Finish:$},data:function(){return{state:B.start,seconds:0,audioDownloadLink:null,audioListeningLink:null}},methods:{pauseRecording:function(){this.state=B.stoppped,J.stop(),clearInterval(q)},startRecording:function(){var t=this;this.state=B.recording,J.start(),J.ondataavailable=function(t){I.push(t.data)},q=setInterval((function(){t.seconds++}),1e3)},finishRecording:function(){var t=this;this.state=B.uploading,"inactive"==J.state&&J.start(),J.stop(),J.onstop=function(n){var e=new Blob(I,{type:"audio/ogg; codecs=opus"});t.audioListeningLink=window.URL.createObjectURL(e),I=[];var o=new FormData;o.append("file",e),console.log(o);var r=E.a.ajax({url:"http://localhost:3000/audio",type:"POST",data:o,cache:!1,dataType:"json",processData:!1,contentType:!1});r.done((function(n){t.audioDownloadLink=n.audioUrl,t.state=B.finish,console.log(n)}))},this.seconds=0,clearInterval(q)},createAudioEl:function(t){var n=document.createElement("audio");n.controls=!0,n.src=t,document.body.innerHTML="",document.body.append(n)},formatTime:function(t){var n=Math.floor(t/60),e=t%60,o=String(Math.floor(n/10))+String(n%10),r=String(Math.floor(e/10))+String(e%10);return o+":"+r}}};e("329b");H.render=i;var z=H;Object(o["b"])(z).mount("#app")}});
//# sourceMappingURL=app.541ef4da.js.map